# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: vlad <vlad@student.42.fr>                  +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2025/12/29 13:31:53 by vbleskin          #+#    #+#              #
#    Updated: 2026/02/12 21:32:23 by vlad             ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

ifndef VERBOSE
.SILENT:
endif
# to shift how the lines around the verbose behave use these line to change the length \xe2\x94\x81\ these are for horizontal lines qnd for the vertical ones its basically any other string
NAME			=	fdf

SRC_DIR			=	src
OBJ_DIR			=	obj
LIB_DIR			=	lib

SUB_DIRS		=	parsing parsing/fbx animation render utils controls

LIBFT_DIR		=	$(LIB_DIR)/libft/
MINLIB_DIR		=	$(LIB_DIR)/minilibx-linux/

SRC				=	$(wildcard $(SRC_DIR)/*.c) \
					$(foreach dir, $(SUB_DIRS), $(wildcard $(SRC_DIR)/$(dir)/*.c))

OBJ				=	$(patsubst $(SRC_DIR)/%.c, $(OBJ_DIR)/%.o, $(SRC))

CFLAGS			=	-Wall -Wextra -Werror -O3 -pthread -march=native -ffast-math

CPPFLAGS		=	-I includes -I $(LIBFT_DIR)/includes -I $(MINLIB_DIR)

VALGRIND		=	-g3

INCLUDE_LIB		=	-L$(LIBFT_DIR) -lft -L$(MINLIB_DIR) -lmlx_Linux -lXext -lX11 -lm -lz 

INCLUDE			=	-I includes -I $(LIBFT_DIR)/includes -I $(MINLIB_DIR)


RED				=	\033[31;1m
BLU				=	\033[34;1m
CYAN			=	\033[36;1m
PUR				=	\033[35;1m
END				=	\033[0m
purp 			=	/033[0m

all: $(NAME)

$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c
				@mkdir -p $(dir $@)
				@$(CC) $(CPPFLAGS) -c $< -o $@

$(NAME): $(OBJ)
	@make -C $(LIBFT_DIR)
	@make -C $(MINLIB_DIR)
	@echo -en "\xe2\x94\x8f\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -e "\xe2\x94\x81\xe2\x94\x93"
	@echo -en "\xe2\x94\x83$(CYAN)      lib compiled without any issues ðŸ”¨, "
	@echo -e "now compiling the sources ðŸ”§ $(END)\xe2\x94\x83"
	@echo -en "\xe2\x94\x97\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81"
	@echo -en "$(END)$(PUR)|lib ready ðŸ› ï¸ |$(END)"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -e "\xe2\x94\x81\xe2\x94\x9b"
	@cc -g $(OBJ) $(INCLUDE_LIB) $(CFLAGS) $(CPPFLAGS) -o $(NAME)
	@echo -en "\xe2\x94\x8f\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -e "\xe2\x94\x81\xe2\x94\x93"
	@echo -en "\xe2\x94\x83$(CYAN)                      everything ok, "
	@echo -e "ready to use ðŸŒ©ï¸                   $(END)\xe2\x94\x83"
	@echo -en "\xe2\x94\x97\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "$(END)$(PUR)|binary ready â›ˆï¸ |$(END)"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -e "\xe2\x94\x81\xe2\x94\x9b"

clean:
	@echo -en "\xe2\x94\x8f\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94"
	@echo -en "\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -e "\xe2\x94\x81\xe2\x94\x93"
	@echo -en "\xe2\x94\x83$(CYAN)                          Cleaning ..."
	@echo -e "  ðŸŒ¨ï¸                               $(END)\xe2\x94\x83"
	@make clean -C $(LIBFT_DIR)
	@make clean -C $(MINLIB_DIR) > /dev/null 2>&1
	@rm -rf $(OBJ_DIR)
	@echo -en "\xe2\x94\x97\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "$(END)$(PUR)|ðŸ”„|$(END)"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -en "\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81\xe2\x94\x81"
	@echo -e "\xe2\x94\x9b"

fclean: clean
	@rm -rf $(NAME)
	@make fclean -C $(LIBFT_DIR)
	# @echo "\033[1;35]cleaned all ðŸš½\033[0m"

re: fclean all